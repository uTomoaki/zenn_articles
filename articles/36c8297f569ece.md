---
title: "OpenAPIå®šç¾©ã‹ã‚‰ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ã¾ã§ã‚’ãƒªãƒã‚¸ãƒˆãƒªã«ã¾ã¨ã‚ã¦ã¿ãŸ"
emoji: "ğŸ‘©â€ğŸ’»"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["OpenAPI", "auto", "swagger", "swaggerCli", "openapiGeneratorCli"]
published: true
---

## è¦ç´„
- OpenAPIã§APIå®šç¾©ä½œæˆã€œã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®è‡ªå‹•ç”Ÿæˆã¾ã§ã‚„ã£ã¦ã¿ãŸã‚ˆ
- Githubã«[ãƒªãƒã‚¸ãƒˆãƒª](https://github.com/uTomoaki/openapi_codegenerator_shell)ã‚’ä½œã£ãŸã‹ã‚‰ã‚ˆã‹ã£ãŸã‚‰ã¿ã¦ã­
- ã¡ãªã¿ã«[ã‚¹ã‚­ãƒ¼ãƒé§†å‹•é–‹ç™ºã«ã¤ã„ã¦ã¾ã¨ã‚ãŸPDF](https://github.com/uTomoaki/openapi_codegenerator_shell/blob/develop/doc/%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E%E9%A7%86%E5%8B%95%E9%96%8B%E7%99%BA%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6.pdf)ã‚‚Githubã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚‹ã‚ˆ

## ã¯ã˜ã‚ã«
ä»¥å‰ã‹ã‚‰APIé–¢é€£ã‚’ã¾ã¨ã‚ã‚‹ã®ã«OpenAPIï¼ˆSwaggerï¼‰ãŒåˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„è¨˜äº‹ã‚’è¦‹ã¦ãŠã‚Šã€å€‹äººçš„ã«èˆˆå‘³ãŒæ¹§ã„ãŸãŸã‚ã€ã€ŒOpenAPIã§APIå®šç¾©ä½œæˆã€œã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®è‡ªå‹•ç”Ÿæˆã€ã¾ã§ã‚’å®Ÿæ–½ã—ã¦ã¿ã¾ã—ãŸã€‚
ã¾ãŸã€OpenAPIã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å–ã‚Šå…¥ã‚ŒãŸã€Œã‚¹ã‚­ãƒ¼ãƒé§†å‹•é–‹ç™ºã€ã«ã¤ã„ã¦ç™ºè¡¨ã™ã‚‹æ©Ÿä¼šãŒã‚ã£ãŸãŸã‚ã€è‰¯ã„æ©Ÿä¼šã ã¨æ€ã„ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚

## ãã‚‚ãã‚‚OpenAPIã¨ã¯
`OpenAPI`ã¨ã„ã†ãƒ¯ãƒ¼ãƒ‰ã‚’åˆã‚ã¦è´ãã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¯å°‘ãªã„ã¨æ€ã†ã€‚
ãŒã€ã€Œ`OpenAPI`ã£ã¦ä½•ï¼Ÿã€ã¨å•ã‚ã‚Œã‚‹ã¨ç­”ãˆã‚‰ã‚Œã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¯æ¸›ã£ã¦ãã‚‹ã®ã§ã¯ãªã„ã‹ã¨ã€‚
ã‚‚ã‚Œãªãç§ã‚‚æ¸›ã‚‹å´ã®äººé–“ã§ã—ãŸã€‚

ã”æœ¬å®¶æ§˜: [OpenAPI Specification](https://swagger.io/specification/#:~:text=The%20OpenAPI%20Specification,of%20implementation%20logic.)
> The OpenAPI Specification (OAS) defines a standard, language-agnostic interface to HTTP APIs which allows both humans and computers to discover and understand the capabilities of the service without access to source code, documentation, or through network traffic inspection. When properly defined, a consumer can understand and interact with the remote service with a minimal amount of implementation logic.

è¦ã¯
**APIå®šç¾©ã‚’ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ç®¡ç†ã§ããŸã‚‰ä¾¿åˆ©ã ã‚ˆã­ï¼Ÿ**
ã£ã¦æ„Ÿã˜ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ã†ã¨è‰¯ã•ãã†ã€‚

## OpenAPI.yamlãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

å®Ÿéš›ã«OpenAPIã‚’åˆ©ç”¨ã—ã¦å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ã¿ãŸã€‚
OpenAPIå®šç¾©ã¯`JSON`or`YAML`å½¢å¼ã§è¨˜è¿°ã§ãã‚‹ãŒã€ä»Šå›ã¯å¯èª­æ€§ãŒé«˜ã„`YAML`å½¢å¼ã‚’æ¡ç”¨ã€‚

å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã”ã¨ã«åˆ†ã‘ãŸã‹ã£ãŸã®ã§ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¯ã“ã‚“ãªæ„Ÿã˜ã€‚

```
.
â”œâ”€â”€ README.md
â””â”€â”€ spec
    â”œâ”€â”€ config.json
    â”œâ”€â”€ openapi.yaml
    â””â”€â”€ path
        â”œâ”€â”€ sample-user-userId.yaml
        â””â”€â”€ sample-users.yaml
```

å®Ÿéš›ã®è¨˜è¿°å†…å®¹ã¯ã“ã‚“ãªæ„Ÿã˜ã€‚ï¼ˆä¸€éƒ¨æŠœç²‹ï¼‰

â—‡[spec/openapi.yaml](https://github.com/uTomoaki/openapi_codegenerator_shell/blob/develop/spec/openapi.yaml)

```
openapi: 3.0.0
info:
  title: APIä¸€è¦§
  description: ã‚µãƒ³ãƒ—ãƒ«APIä¸€è¦§ã§ã™ã€‚
  version: 1.0.0
servers:
  - url: http://localhost:2131/
    description: The Local API server
paths:
  /api/sample-users:
    $ref: "./path/sample-users.yaml"
  /api/sample-users/{userId}:
    $ref: "./path/sample-user-userId.yaml"
```

â—‡[spec/path/sample-users.yaml](https://github.com/uTomoaki/openapi_codegenerator_shell/blob/develop/spec/path/sample-users.yaml)

```
get:
  summary: ã‚µãƒ³ãƒ—ãƒ«ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—
  operationId: getSampleUsers
  tags:
    - SAMPLE
  responses:
    "200":
      description: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—æˆåŠŸ
      content:
        application/json:
          schema:
            type: array
            items:
              type: object
              properties:
                name:
                  type: string
                  example: "John Doe"
                email:
                  type: string
                  example: "john.doe@example.com"
                age:
                  type: integer
                  example: 30
                createdAt:
                  type: string
                  format: date-time
                  example: "2024-07-01 12:00:00"
                updatedAt:
                  type: string
                  format: date-time
                  example: "2024-07-01 12:00:00"
```

VSCodeã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºã™ã‚‹ã¨ã“ã‚“ãªæ„Ÿã˜
ã™ã”ãè‰¯ã„ï¼ï¼è¦‹ã‚„ã™ã„ã­
![alt text](/images/36c8297f569ece-1.png)

## ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰è‡ªå‹•ç”Ÿæˆ
ã“ã“ã¾ã§ã§OpenAPIã‚’åˆ©ç”¨ã—ãŸAPIã®å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ãŸã€‚

**ã—ã‹ã—ã“ã“ã§çµ‚äº†ã¯ã‚‚ã£ãŸã„ãªã„ã€‚**

ã“ã®å®šç¾©ã‚’ã‚‚ã¨ã«ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®è‡ªå‹•ç”Ÿæˆã¾ã§å¯¾å¿œã—ã¦ã¿ãŸã€‚

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®è‡ªå‹•ç”Ÿæˆã¾ã§ã®å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ã¯ã“ã‚“ãªæ„Ÿã˜ã€‚

```
docker run --rm -v $(pwd):/local openapitools/openapi-generator-cli:v7.7.0 generate -i /local/spec/openapi.yaml -g typescript-axios -c /local/spec/config.json -o /local/build/frontend
```

**é•·ã„ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼**
ã®ã§ã€Shellã«ã¾ã¨ã‚ã¾ã—ãŸã€‚ï¼ˆãã‚Œãã‚Œé•·ã„ã§å‰²æ„›ï¼‰
- [generate-frontend.sh](https://github.com/uTomoaki/openapi_codegenerator_shell/blob/develop/generator/generate-frontend.sh)
- [generate-backend.sh](https://github.com/uTomoaki/openapi_codegenerator_shell/blob/develop/generator/generate-backend.sh)

**Shellã™ã‚‰ã‚‚æ‰“ã¤ã®é¢å€’è‡­ã„ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼**
ã®ã§Makefileã‚’ä½œã‚Šã¾ã—ãŸã€‚

- [Makefile](https://github.com/uTomoaki/openapi_codegenerator_shell/blob/develop/Makefile)

```
.PHONY: generate-backend-api generate-frontend-api generate-all

generate-backend-api:
	sh generator/generate-backend.sh

generate-frontend-api:
	sh generator/generate-frontend.sh

generate-all: generate-backend-api generate-frontend-api
```

å®Ÿéš›ã«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã¿ãŸã‚‰ã“ã‚“ãªæ„Ÿã˜

```
% make generate-all
sh generator/generate-backend.sh
========== [START] OpenAPI Generator: backend ==========
[info] ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ START
Validating spec (/local/spec/openapi.yaml)
No validation issues detected.
[info] ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ OK
[info] ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ START
[main] INFO  o.o.codegen.DefaultGenerator - Generating with dryRun=false
[main] INFO  o.o.codegen.DefaultGenerator - OpenAPI Generator: php (client)
[main] INFO  o.o.codegen.DefaultGenerator - Generator 'php' is considered stable.
~
[info] ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã«æˆåŠŸã—ï¿½ï¿½ã—ãŸ
[info] ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ OK
========== [FINISH] OpenAPI Generator: backend ==========
sh generator/generate-frontend.sh
========== [START] OpenAPI Generator: frontend ==========
[info] ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ START
Validating spec (/local/spec/openapi.yaml)
No validation issues detected.
[info] ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ OK
[info] ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ START
[main] INFO  o.o.codegen.DefaultGenerator - Generating with dryRun=false
[main] INFO  o.o.codegen.DefaultGenerator - OpenAPI Generator: typescript-axios (client)
~
[info] ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã«æˆåŠŸã—ã¾ã—ãŸ
[info] ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ OK
========== [FINISH] OpenAPI Generator: frontend =========
% 
```

## æœ€çµ‚çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ
OpenAPIå®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ã‚‰ã€è‡ªå‹•ç”Ÿæˆç”¨Shellã‚„ã‚‰ã€Shellå®Ÿè¡Œç”¨ã®Makefileã‚„ã‚‰ã‚’è¿½åŠ ã—ã¦ã„ãã€
æœ€çµ‚çš„ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¯ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

```
.
â”œâ”€â”€ Makefile
â”œâ”€â”€ README.md
â”œâ”€â”€ build
â”‚   â”œâ”€â”€ backend
â”‚   â”œâ”€â”€ frontend
â”œâ”€â”€ doc
â”‚   â””â”€â”€ ã‚¹ã‚­ãƒ¼ãƒé§†å‹•é–‹ç™ºã«ã¤ã„ã¦.pdf
â”œâ”€â”€ generator
â”‚   â”œâ”€â”€ generate-backend.sh
â”‚   â””â”€â”€ generate-frontend.sh
â””â”€â”€ spec
    â”œâ”€â”€ config.json
    â”œâ”€â”€ openapi.yaml
    â””â”€â”€ path
        â”œâ”€â”€ sample-user-userId.yaml
        â””â”€â”€ sample-users.yaml

```

ã¡ãªã¿ã«[ã‚¹ã‚­ãƒ¼ãƒé§†å‹•é–‹ç™ºã«ã¤ã„ã¦ã¾ã¨ã‚ãŸPDF](https://github.com/uTomoaki/openapi_codegenerator_shell/blob/develop/doc/%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%9E%E9%A7%86%E5%8B%95%E9%96%8B%E7%99%BA%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6.pdf)ã¯ã€è‡ªåˆ†ãŒä»–ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®äººã«ç´¹ä»‹ã—ãŸã‚Šã™ã‚‹éš›ã«åˆ©ç”¨ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚
ç´¹ä»‹ç”¨ã«ç¶ºéº—ã«ã¾ã¨ã‚ãŸã¤ã‚‚ã‚Šãªã®ã§ã€ã‚ˆã‘ã‚Œã°ã”å‚ç…§ãã ã•ã„ã€‚


## ç¾æ™‚ç‚¹ã®æ‰€æ„Ÿ
APIå®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆã¾ã§ã¯è‰¯ã„æ„Ÿã˜ã§ã—ãŸã€‚
VSCodeã§ã®ãƒ“ãƒ¥ãƒ¼ã‚‚éå¸¸ã«ã¿ã‚„ã™ãã¦è‰¯ã„ï¼
ãã—ã¦ä½•ã‚ˆã‚Šã€APIå®šç¾©ã‚’Gitç®¡ç†ã—ã‚„ã™ããªã£ãŸã“ã¨ãŒå¤§ãã„ï¼

ãŸã ã€è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒã‚¤ãƒã‚¤ãƒãªã¨ã“ã‚ã‚ã‚Š...ã€‚
å…·ä½“çš„ã«ã¯ã€APIå®Ÿè¡Œæ™‚ã®æˆ»ã‚Šå€¤ã®å‹ãŒ200ã ã‘ã‚’æƒ³å®šã—ã¦ã„ãŸã‚Šã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ã¾ã§ç”Ÿæˆã—ã¦ãã‚Œãªã‹ã£ãŸã‚Š...ã€‚

ã“ã“ã‚‰è¾ºã¯ã‚‚ã†å°‘ã—é‹ç”¨ã ã£ãŸã‚Šä½¿ã„æ–¹ã‚’è€ƒãˆãªã„ã¨ã—ãªã„ã¨ã„ã‘ãªã„ã€‚

è‡ªåˆ†ã®å®ŸåŠ›ä¸è¶³å«ã‚ã¦ã€ç¾æ™‚ç‚¹ã®æ‰€æ„Ÿã¯ã€Œ75ç‚¹ã€ï¼

å¼•ãç¶šãã€OpenAPIã‚„ã‚‰ã‚¹ã‚­ãƒ¼ãƒé§†å‹•é–‹ç™ºã«ã¤ã„ã¦å‹‰å¼·ã—ã¦ã„ãã¾ã™ã€‚
